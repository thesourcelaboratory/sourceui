tinymce.PluginManager.add('suiimage', function(editor, url) {
    
    editor.addButton('suiimage', {
        icon: 'x icon-photo',
        tooltip: "Inserir imagens",
        onclick: function() {
            var $field = $(editor.getElement()).closest('sui-field');
            sourceui.instances.interface.plugins.sector.float({
                caller: $field,
                title: 'Seletor',
                size: 'large',
                link: editor.settings.browse.image,
                on: {
                    'alias:pick' : {
                        bind: '.sui-widget.explorer, .sui-widget.upload',
                        fn: function(imgs){
                            $(imgs).each(function(){
                                var $img = $(this);
                                editor.insertContent('<p class="image-wrap"><img src="'+$img.data('src')+'" title="'+$img.data('title')+'" style="width:300px" class="fr-fic fr-dib"/></p>');
                            });
                        }
                    }
                }
            });
        }
    });

    return {
        getMetadata: function () {
            return  {
                title: "Example plugin",
                url: "http://exampleplugindocsurl.com"
            };
        }
    };
});
