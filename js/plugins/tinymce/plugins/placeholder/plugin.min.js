tinymce.PluginManager.add('placeholder', function(editor) {

	var $fieldwrap = $(editor.getElement()).closest('.fieldwrap');

	function testPlaceholder(){
		if (editor.getContent() === "" || editor.getContent() === null) {
			tinymce.DOM.addClass( editor.bodyElement, 'empty-content' );
			$fieldwrap.addClass('empty');
		} else {
			tinymce.DOM.removeClass( editor.bodyElement, 'empty-content' );
			$fieldwrap.removeClass('empty');
		}
	}

	editor.on('init', function () {
		var element = editor.getElement();
		tinymce.DOM.addClass( editor.bodyElement, 'content-placeholder' );
		element.setAttribute("data-placeholder",editor.settings.placeholder||element.getAttribute("placeholder")||element.getAttribute("data-placeholder")||'Text here');
		testPlaceholder();
	});
	editor.on('change', function () {
		testPlaceholder();
	});
	editor.on('input', function () {
		testPlaceholder();
	});
	editor.on('keydown', function (event) {
		testPlaceholder();
		if ((event.key == "Backspace" || event.key == "Delete") && tinymce.DOM.hasClass( editor.bodyElement, 'empty-content')){
			console.log('empty backspace or del. Content: ',editor.getContent());
			event.preventDefault();
			return false;
		}
	});
});